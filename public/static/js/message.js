!function(n){function e(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t={};e.m=n,e.c=t,e.d=function(n,t,i){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:i})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="./",e(e.s=300)}({300:function(n,e,t){"use strict";function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=t(39),r=function(){function n(n,e){var t=[],i=!0,o=!1,r=void 0;try{for(var a,u=n[Symbol.iterator]();!(i=(a=u.next()).done)&&(t.push(a.value),!e||t.length!==e);i=!0);}catch(n){o=!0,r=n}finally{try{!i&&u.return&&u.return()}finally{if(o)throw r}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u=function(){function n(){var e=this;i(this,n),this._openWin=function(){return e.win&&!e.win.closed||(e.win=window.open(o.a.mapWinDomain,"gis","height="+o.a.mapWinHeight+", width="+o.a.mapWinWidth+", top=0, left=20, toolbar=no, menubar=no, scrollbars=no, resizable=yes,location=no, status=no")),e.win&&!e.win.closed},this.annotationAdd=function(){return e.executeWithWinOpened(function(){return e.win.postMessage({type:"annotationAdd"},window.origin)})},this.locationDisplay=function(n){var t=r(n,2),i=t[0],o=t[1];return e.executeWithWinOpened(function(n){var t=r(n,2),i=t[0],o=t[1];return e.win.postMessage({type:"locationDisplay",coordinate:[i,o]},window.origin)},[i,o])},this.radiusAnalyse=function(n){return e.executeWithWinOpened(function(n){return e.win.postMessage({type:"radiusAnalyse",location:n},window.origin)},n)},this._openWin(),this.eventListner={annotationLocated:[],radiusAnalyse:[]},this.eventListnerOnce={annotationLocated:[],radiusAnalyse:[]},window.addEventListener("message",function(n){var t=n.data,i=t.type,o=t.data;e.eventListner[i]&&e.eventListner[i].forEach(function(n){return n.call(window,o)}),e.eventListnerOnce[i]&&e.eventListnerOnce[i].forEach(function(n){return n.call(window,o)}),e.eventListnerOnce[i]=[]})}return a(n,[{key:"info",value:function(){console.log(this.win)}},{key:"executeWithWinOpened",value:function(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];this.win.closed?window.confirm("\u5730\u56fe\u7a97\u53e3\u5df2\u88ab\u5173\u95ed,\u662f\u5426\u91cd\u65b0\u6253\u5f00\uff1f")&&this._openWin()&&this.win.addEventListener("DOMContentLoaded",function(){n.apply(void 0,t)}):n.apply(void 0,t)}},{key:"on",value:function(n,e){"function"===typeof e&&this.eventListner[n]&&this.eventListner[n].push(e)}},{key:"once",value:function(n,e){"function"===typeof e&&this.eventListnerOnce[n]&&this.eventListnerOnce[n].push(e)}},{key:"un",value:function(n,e){if(!this.eventListner[n]||"function"===typeof e){var t=this.eventListner[n].indexOf(e);t>0&&(this.eventListner[n].splice(t,1),this.un(n,e))}}}]),n}();e.default=u,window.Message=u},39:function(n,e,t){"use strict";var i={apiPrefix:"/map/api/",timeout:2e3,mapType:"Tian",mapWinDomain:"map.html",mapWinHeight:800,mapWinWidth:800},o=i;e.a=Object.assign({},o,window.config||{})}});
//# sourceMappingURL=message.js.map